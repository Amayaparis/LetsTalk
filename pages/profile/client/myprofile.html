<template name="profilepage">
  {{#if currentUser}}
    {{> myprofile me=getProfile}}
  {{else}}
  <div class="alert alert-warning" role="alert">
    <strong>Sorry!</strong> You must be logged in to view your profile!
  </div>
  {{/if}}
</template>

<template name="myprofile">
  {{#if getBadInputState}}
    <div class="alert alert-danger" role="alert">
      <strong>Error!</strong> Please add a name to your profile.
    </div>
  {{/if}}
  <div class="jumbotron">
    <div class="row">
      <div class="col-md-4">
        <h1><input class="form-group" id="name-js" value="{{me.name}}" size="8"></h1><br>
        <button class="btn btn-primary" id="update-js">Update</button> <button class="btn btn-danger" id="reset-js">Reset</button><br>
        <p>Points: {{me.points}}</p>
        <!-- If this is current user's profile, have edit button appear -->
      </div>
      <div class="col-md-2 col-md-offset-5">
        <br>
        <table class="table">
          <thead>
            <tr>
              <th>Followers</th><th>Following</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>{{me.followers.length}}</td><td>{{me.following.length}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4 col-md-offset-1 bg-info">
      <p>
        <h2>Picture of Me:</h2>
        <br><img src="" width="100%" alt="Picture of Name">
        <div class="form-group">
          Choose a Profile Picture: <br>
          <input type="file" class="form-control-file" id="imgSelect-js">
        </div>
      </p>
    </div>
    <div class="col-md-4 col-md-offset-2 bg-warning">
      <p>
      <h2>Biography:</h2><br>
        Birthday:
        <div class="form-group">
          Date of Birth: <input type="date" class="form-control" id="dob-js" value={{me.dob}}>
        </div>
        <br>Interests:
        <textarea class="form-control" rows="10" id="bio-js" style="resize:none">{{me.bio}}</textarea>
        <br>
      </p>
    </div>
  </div>
  <br><br>
  <div class="jumbotron">
    <fieldset class="form-group">
      <legend>Recent Activity</legend>
      <table class="table">
        <tbody>
          {{#if isChatsClicked}}
            <td><input type="radio" name="activity" id="chats-js" checked> Chats</td>
          {{else}}
            <td><input type="radio" name="activity" id="chats-js"> Chats</td>
          {{/if}}
          {{#if isPostsClicked}}
            <td><input type="radio" name="activity" id="posts-js" checked> Posts</td>
          {{else}}
            <td><input type="radio" name="activity" id="posts-js"> Posts</td>
          {{/if}}
          {{#if isPicsClicked}}
            <td><input type="radio" name="activity" id="pics-js" checked> Pictures</td>
          {{else}}
            <td><input type="radio" name="activity" id="pics-js"> Pictures</td>
          {{/if}}
          {{#if isPollsClicked}}
            <td><input type="radio" name="activity" id="polls-js" checked> Polls</td>
          {{else}}
            <td><input type="radio" name="activity" id="polls-js"> Polls</td>
          {{/if}}
        </tbody>
      </table>
    </fieldset>
  </div>
  <!-- If radio selected a certain one then set the head to the selected item and then update the displayed table items
  as being text, links, or images.
  -->
  <div class="col-md-8 col-md-offset-2">
    <table class="table">
      <thead>
        <tr>
          <th>Recent {{getClickedRecent}}</th>
        </tr>
      </thead>
      <tbody>
        {{#if isPicsClicked}}
          {{#each url in getRecentCollection}}
            <tr>
              <img src="{{url}}" alt="url={{url}}" width="40%">
            </tr>
          {{/each}}
        {{else}}
          {{#each recent in getRecentCollection}}
            <tr>
              <td>{{recent.title}}</td>
            </tr>
          {{/each}}
        {{/if}}
      </tbody>
    </table>
  </div>
</template>
